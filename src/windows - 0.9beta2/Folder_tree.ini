src/
├─ App.tsx
├─ index.css
└─ windows/
   ├─ MainUI.tsx                 # 오케스트레이터 (보드/분할/오버레이 연결)
   │
   ├─ icons/                      #아이콘들 png 이미지 (icons.png 로 이미지로 이름 확인가능)
   │
   ├─ boards/                    # 보드(순수 뷰 + 콜백)
   │  ├─ TextBoard.tsx          # WYSIWYG 텍스트 (HTML 보존)
   │  │         ├─ index.ts
   │  │         ├─ engine.ts
   │  │         └─ gutter.ts
   │  │ 
   │  └─ ImageBoard.tsx          # 패닝/줌 뷰어 (참조용)
   │  # └─ ViewerBoard.tsx     # (예정)
   │  # └─ EditBoard.tsx       # (예정)
   │  # └─ AiChatBoard.tsx       # (예정)
   │
   ├─ panes/                     # 레이아웃/분할 전담
   │  ├─ SplitPane.tsx           # 리사이즈 가터(히트박스/더블클릭 50:50)
   │  └─ LeafPane.tsx            # 리프 컨테이너(핸들/메뉴/스플릿 제스처)
   │
   ├─ ui/                        # 공용 UI
   │  ├─ TopBar.tsx
   │  ├─ TitleBar.tsx
   │  ├─ EchoView.tsx
   │  ├─ BoardHandle.tsx         # 핸들 버튼(좌상단)
   │  ├─ TextToolbar.tsx         # 텍스트 서브 툴바
   │  └─ contextmenu/
   │     └─ ContextMenu.tsx      # 서브메뉴 지원 컨텍스트 메뉴
   │     # └─ useMenuKeyboard.ts  # (보류) 방향키 내비
   │
   ├─ overlay/                   # 오버레이(지연 로드)
   │  ├─ Sidebar.tsx
   │  └─ Preferences.tsx         # PreferenceModal(default export)
   │
   ├─ hooks/                     # 범용 훅 (추가 예정)
   │  # ├─ useSplitPreview.ts
   │  # └─ usePreferences.ts
   │
   └─ lib/                       # 유틸/상태
      └─ splitTree.ts            # 분할 트리 조작(불변 업데이트)

# 진행 현황 (R6~R8)
# ✅ 완료, 🟡 진행중/보류, ⏳ 예정

[R6] Leaf & Split 안정화
- ✅ LeafPane 도입: 보드 스위칭/핸들/우클릭 메뉴/스플릿 제스처 담당
- ✅ SplitPane 히트박스/더블클릭 50:50/버블링 차단
- ✅ 컨텍스트 메뉴: Change Board/Open/Save/Save As/Export As
- ✅ 가이드 점선 미리보기(핸들 드래그 중)
- ✅ 이미지→텍스트 전환 막힘 해결
    (ImageBoard onViewChange가 type을 되돌리지 않도록 가드)
- ✅ 타입 전환 시 리마운트 보장
    (LeafPane 및 보드에 key: `${leafId}-${type}` 적용)

[R7] UX 폴리시 & 내비 (가벼운 단계)
- 🟡 서브메뉴 “세이프 코리도”(비스듬히 이동해도 서브 유지)
- 🟡 (옵션) 키보드 내비게이션: ↑↓→← / Enter / Esc
- ⏳ 핸들 드래그 스플릿 애니/가이드 고도화(필요 시)

[R8] 저장 체계 & 레이아웃 스냅샷
- ⏳ File I/O를 Tauri에 연결: Open/Save/Save As/Export
- ⏳ 레이아웃 저장/복원(JSON): 분할 트리 + 보드 컨텍스트
  - text: 문서 경로/캐럿
  - image: src/view(scale, offset)
  - outliner/ai: 세션/선택 노드 등
- ⏳ 자동저장 옵션(Preferences 연동)
- ⏳ 상태 스토어 분리(Zustand 권장): prefs/layout/recent

# 설계 메모
- 문서 저장(보드 컨텐츠) ↔ 레이아웃 저장(배치/참조/뷰상태) 분리
- 복원 시: 레이아웃 JSON 로드 → 각 보드는 자신의 파일 경로로 로드
